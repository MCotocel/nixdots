#!/usr/bin/env bash
res=$(echo -en "Reload|NixOS rebuild|Lock|Logout|Shutdown|Reboot" | rofi -sep "|" -dmenu -i -p 'Power Options') # Make selection prompt

if [ $res = "Reload" ]; then

    notify-send 'Power menu' 'Reloading config...'
    sleep 1
    echo 'awesome.restart()' | awesome-client

elif [ $res = "NixOS rebuild" ]; then

    notify-send 'Power menu' 'Syncing NixOS config'
    nas nix sync
    notify-send 'Power menu' 'Pushing NixOS config'
    nas nix push
    notify-send 'Power menu' 'Rebuilding NixOS config'
    nas nix rebuild
    notify-send 'Power menu' 'NixOS config rebuilt'

elif [ $res = "Lock" ]; then

    notify-send 'Power menu' 'Locking screen...'
    ~/.bin/lock

elif [ $res = "Logout" ]; then

    notify-send 'Power menu' 'Logging out...'
    sleep 1
    echo 'awesome.quit()' | awesome-client

elif [ $res = "Shutdown" ]; then # If selection is shutdown

    notify-send 'Power menu' 'Shutting down...'
    sleep 1
    shutdown -h now

elif [ $res = "Reboot" ]; then

    notify-send 'Power menu' 'Rebooting...'
    sleep 1
    reboot

fi
